"use strict";(self["webpackChunktasker"]=self["webpackChunktasker"]||[]).push([[699],{89:function(a,s){s.Z=(a,s)=>{const t=a.__vccOpts||a;for(const[e,n]of s)t[e]=n;return t}},875:function(a,s,t){t.d(s,{S:function(){return r}});t(7658);var e=t(1020),n=t(4870),o=t(3396),i=t(8765),l=t(8332);const r=(0,e.Q_)("bigMenuStore",(()=>{const a=(0,n.qj)({id:0,name:"",surname:""}),s=(0,n.qj)([{id:1,name:"Сегодня",count:"",color:"#4ceba7",url:"/workspace/sortList=today"},{id:2,name:"С флажком",count:"",color:"#e76262",url:"/workspace/sortList=with_flag"},{id:3,name:"Завершено",count:"",color:"#daadad",url:"/workspace/sortList=done"},{id:4,name:"Все",count:"",color:"#c4c4c4",url:"/workspace/sortList=all"}]),t=(0,n.qj)([]),e=(0,n.qj)([{id:0,name:"Все теги"}]),r=((0,i.J)(),(0,n.iH)(!1)),c=(0,n.iH)(!1),d=(0,n.iH)(!1);(0,o.bv)((async()=>{await u(),await p(),await v()}));const u=async()=>{const s=await l.Z.getInfo("user");a.id=s.id,a.email=s.email,a.name=s.name,a.surname=s.surname},p=async()=>{console.log("go"),await m(),await g(),await f()},v=async()=>{const a=setInterval((()=>{console.log("request"),m(),g(),f()}),6e4);setTimeout((()=>{console.log("stop"),clearInterval(a)}),36e5)},m=async()=>{r.value=!0;const t=await l.Z.getInfoWithArgs("sortLists",{params:{user_id:a.id}});"object"===typeof t&&(t.forEach((a=>{s[a.id-1].count=a.count})),r.value=!1)};const g=async()=>{try{c.value=!0;const s=await l.Z.getInfoWithArgs("lists",{params:{user_id:a.id}});"object"===typeof s&&s.length>0&&(t.length=0,s.forEach((a=>{t.push(a)})),c.value=!1)}catch(s){console.log(s)}},f=async()=>{try{d.value=!0;const a=await l.Z.getInfo("tags");"object"===typeof a&&a.length>0&&(e.length=0,e.push({id:0,name:"Все теги"}),a.forEach((a=>{e.push(a)})),d.value=!1)}catch(a){console.log(a)}},_=a=>{t.push(a)},h=async a=>{await l.Z.saveList(a),await p()},w=async a=>{await l.Z.deleteList(a),await p()};return{sortLists:s,is_load_sortLists:r,personalLists:t,is_load_personalLists:c,personalTags:e,is_load_personalTags:d,user:a,firstRequest:p,addNewList:_,saveList:h,deleteList:w}}))},8765:function(a,s,t){t.d(s,{J:function(){return c}});t(7658);var e=t(1020),n=t(4870),o=t(3396),i=t(2483),l=t(8332),r=t(875);const c=(0,e.Q_)("listViewStore",(()=>{const a=(0,n.qj)([]),s=(0,n.qj)([]),t=(0,n.qj)({id:"",name:"",color:""}),e=(0,n.qj)({id:0,name:"",color:""}),c=(0,n.qj)([]),d=(0,n.qj)([]),u=(0,n.iH)(""),p=(0,n.iH)(!0),v=(0,n.iH)(!0),m=(0,n.iH)(!1),g=(0,n.iH)(""),f=(0,i.yj)(),_=(0,n.iH)(f.path),h=(0,r.S)();(0,o.bv)((async()=>{setTimeout((()=>{w()}),300);setInterval((()=>{String(_.value)!==String(f.path)&&(p.value=!0,w())}),0)}));const w=async()=>{v.value=!0,_.value=f.path;try{m.value=!1,await k(),v.value=!1}catch(a){console.log(a),m.value=!0,p.value=!1,v.value=!1}},k=async()=>{if(f.params.id_list?g.value=`list?id=${f.params.id_list}`:f.params.name?g.value=`list?name=${f.params.name}`:f.params.id_tag?g.value=`tag?id=${f.params.id_tag}`:g.value="",g.value){const a=await l.Z.getInfoWithArgs(g.value,{params:{user_id:h.user.id}});setTimeout((()=>{y(a)}),300)}},y=n=>{(n["sortList"]||n["list"]||n["tag"])&&(n["tasks"]||n["tasksByList"])?(f.params.id_list?a.length=0:f.params.name?s.length=0:f.params.id_tag&&(d.length=0),f.params.id_list?n["tasks"].forEach((s=>{s.key=Math.random(),a.push(s)})):f.params.name&&n["tasksByList"].forEach((a=>{a.key=Math.random(),a.tasks.forEach((a=>{a.key=Math.random()})),s.push(a)})),q(),console.log(a),console.log(s),f.params.id_list?(t.id=n["list"].id,t.name=n["list"].name,t.color=n["list"].color):f.params.name?(e.id=n["sortList"].id,e.name=n["sortList"].name,h.sortLists.forEach((a=>{a.id===e.id&&(e.color=a.color)}))):f.params.id_tag&&(u.value=n["tag"]),p.value=!1,v.value=!1):(m.value=!0,p.value=!1,v.value=!1)},L=a=>{let t=0;s.forEach((s=>{s.tasks.forEach(((t,e)=>{+a===+t.id&&(console.log(s.tasks[e]),s.tasks.splice(e,1))})),s.tasks.length>0&&t++})),t||(s.length=0)},S=async a=>{await l.Z.postInfo("updateTask",a);await h.firstRequest()},b=()=>{a.push({id:null,id_list:t.id,name:null,description:null,deadline:null,is_done:0,is_flagged:0,url:null,priority:null})},Z=(s,t)=>{a.find((a=>a.id===s)).is_done=+t,I(),q()},I=()=>{a.sort(((a,s)=>a.id>s.id?1:a.id==s.id?0:a.id<s.id?-1:void 0))},q=()=>{a.sort(((a,s)=>a.is_done>s.is_done?1:a.is_done==s.is_done?0:a.is_done<s.is_done?-1:void 0))},T=()=>{a.forEach(((s,t)=>{s.id||a.splice(t,1)}))},j=async s=>{s.id_list=t.id;const e=await l.Z.postInfo("createTask",s);return a.forEach(((a,s)=>{a.id||(a.id=e.id)})),await h.firstRequest(),e},E=async s=>{a.forEach(((t,e)=>{t.id===s.id&&a.splice(e,1)})),await l.Z.postInfo("deleteTask",s),await h.firstRequest()},H=async a=>{const s=await l.Z.globalSearch(a);console.log(s),c.length=0,s.forEach((a=>{c.push(a)}))};return{tasks:a,stasks:s,listInfo:t,sortListInfo:e,searchResult:c,loading:p,loadingSmall:v,is_somethingWrong:m,request:g,tags:d,tag_name:u,currentPath:_,getTasksOrTags:w,updateTask:S,addNewTask:b,removeNewTask:T,createTask:j,deleteTask:E,updateTaskDone:Z,clearTasks:L,findTasks:H}}))},7492:function(a,s,t){t.d(s,{Z:function(){return u}});var e=t(3396),n=t(7139),o=t(4870),i=t(8977),l=t(8765),r={__name:"ListHeader",props:{color:String,fontSize:String},setup(a){const s=a,t=(0,l.J)();return(a,l)=>((0,e.wg)(),(0,e.iD)("h2",{class:"list-header",style:(0,n.j5)({color:s.color,fontSize:s.fontSize})},[(0,e.WI)(a.$slots,"default"),(0,o.SU)(t).loadingSmall?((0,e.wg)(),(0,e.j4)(i.Z,{key:0})):(0,e.kq)("",!0)],4))}},c=t(89);const d=(0,c.Z)(r,[["__scopeId","data-v-4ddaa2ab"]]);var u=d},8977:function(a,s,t){t.d(s,{Z:function(){return v}});var e=t(3396);const n=a=>((0,e.dD)("data-v-58bd569a"),a=a(),(0,e.Cn)(),a),o={class:"lds-ripple"},i=n((()=>(0,e._)("div",null,null,-1))),l=n((()=>(0,e._)("div",null,null,-1))),r=[i,l];function c(a,s){return(0,e.wg)(),(0,e.iD)("div",o,r)}var d=t(89);const u={},p=(0,d.Z)(u,[["render",c],["__scopeId","data-v-58bd569a"]]);var v=p},4699:function(a,s,t){t.r(s),t.d(s,{default:function(){return L}});t(7658);var e=t(3396),n=t(4870),o=t(8332),i=t(2483),l=t(9242);const r={class:"wrapper"},c={class:"label"},d={class:"bordered"};var u={__name:"InputBordered",props:{value:String},setup(a){const s=a;let t=(0,n.iH)(s.value);return(a,s)=>((0,e.wg)(),(0,e.iD)("div",r,[(0,e._)("div",c,[(0,e.WI)(a.$slots,"default"),(0,e.Uk)(":")]),(0,e._)("div",d,[(0,e.wy)((0,e._)("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=a=>(0,n.dq)(t)?t.value=a:t=a)},null,512),[[l.nr,(0,n.SU)(t)]])])]))}},p=t(89);const v=(0,p.Z)(u,[["__scopeId","data-v-6fd74f79"]]);var m=v,g=t(7492),f=t(875),_=t(8765);const h={class:"user-view"},w={class:"inputs-container"};var k={__name:"UserView",setup(a){const s=(0,i.tv)(),t=(0,f.S)(),l=((0,_.J)(),t.user),r=async()=>{const a=await o.Z.logout();"logout"===a&&await s.push({path:"/"})},c=async()=>{};return(a,s)=>((0,e.wg)(),(0,e.iD)("div",h,[(0,e.Wm)(g.Z,null,{default:(0,e.w5)((()=>[(0,e.Uk)("Hello Andrew!")])),_:1}),(0,e._)("div",w,[(0,e.Wm)(m,{value:(0,n.SU)(l).email},{default:(0,e.w5)((()=>[(0,e.Uk)(" Email ")])),_:1},8,["value"]),(0,e.Wm)(m,{value:(0,n.SU)(l).name},{default:(0,e.w5)((()=>[(0,e.Uk)(" Name ")])),_:1},8,["value"]),(0,e.Wm)(m,{value:(0,n.SU)(l).surname},{default:(0,e.w5)((()=>[(0,e.Uk)(" Surname ")])),_:1},8,["value"]),(0,e._)("div",{class:"btn-container"},[(0,e._)("button",{class:"btn save",onClick:c},"Save"),(0,e._)("button",{class:"btn exit",onClick:r},"Logout")])])]))}};const y=(0,p.Z)(k,[["__scopeId","data-v-5d7b2dfc"]]);var L=y}}]);
//# sourceMappingURL=699.204cf4c7.js.map